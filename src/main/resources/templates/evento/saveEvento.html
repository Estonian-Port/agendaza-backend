<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"  lang='es'>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="colorlib.com">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Agregar nuevo evento</title>

    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="../vendor/bootstrap/css/bootstrap.min.css">
    <!--===============================================================================================-->
    
    <link rel="stylesheet" href="../vendor/jquery-steps/jquery.steps.css">
    <link rel="stylesheet" href="../css/saveEvento.css">

</head>

<body>
	<div class="wrapper">
	    <form th:action="@{/saveEvento}" method="post" th:object="${reservaContainer}" id="reservacion-form" class="signup-form">
	    	<div id="reservacion-wizard">

			    <!--===============================================================================================-->
		        <h3>Tipo de Evento</h3>
		        <section>					
			        <div class="row">
						<div class="col-md-6">
							<div class="col-md-10">
					            <h2>Selecciones tipo de evento a realizar</h2>
					            <p>El tipo de evento a seleccionar cambiara la cantidad de horas de duracion y presupuesto final</p>
						    </div>
				            <div class="col-md-10">
				                <label for="tipoEvento" class="form-label">Tipo Evento</label>
				                <select class="form-select" id="tipoEvento" name="tipoEvento">
				                    <option selected hidden th:value="0">Tipo Evento</option>
				                    <option th:each="subTipoEvento : ${listaSubTipoEvento}" th:class="${subTipoEvento.tipoEvento.nombre}" th:text="${subTipoEvento.tipoEvento.nombre}" th:value="${subTipoEvento.tipoEvento.id}"/>
				                </select>
				            </div>
		
				            <div class="col-md-10 mt-3">
				            	<label for="tipoEvento" class="form-label">Sub Tipo Evento</label>
				                <select class="form-select" id="subTipoEvento" name="subTipoEvento" th:field="*{evento.subTipoEvento.id}">
				                    <option selected hidden th:value="0">Sub Tipo Evento</option>
				                    <option th:each="subTipoEvento : ${listaSubTipoEvento}" th:classappend="${subTipoEvento.nombre} + ' ' + ${subTipoEvento.tipoEvento.nombre}" th:text="${subTipoEvento.nombre}" th:value="${subTipoEvento.id}"/>
				                </select>
				            </div>
					   	</div>
						<div class="col-md-6">
			            	<div class="form-group">
			                    <label for="servicio" class="form-label">Incluye los siguiente servicios</label> 
			                    <div id="listaServicio"> </div>
				            </div>
						</div>
					</div>
		        </section>
		    	<!--===============================================================================================-->

		    	<!--===============================================================================================-->
		        <h3>Datos del evento</h3>
		        <section>
		            <h2>Agregar nuevo evento</h2>
		            <p th:text="'Cree el nuevo evento a realizar en ' + ${salon.nombre}"></p>
		            <div class="fieldset-content">
		                
                        <div class="form-group col-md-4">
                        	<label for="nombre" class="form-label">Nombre del evento</label>
                            <input type="text" class="form-control" id="nombre" name="nombre" th:field="*{evento.nombre}" required>
                        </div>

		                <div class="form-group">
		                    <label for="date" class="form-label w-100">Fecha de evento</label> 
		                    <input type="text" id="date" data-format="DD-MM-YYYY" data-template="D MMM YYYY" th:field="*{fecha}"/>
		                </div>

		                <div class="form-group">
		                    <label for="time_start" class="form-label w-100">Hora Inicio</label> 
		                    <input type="text" id="time_start" data-format="HH:mm" data-template="HH : mm" name="datetime" th:field="*{inicio}">
		                </div>

		                <div class="form-group" id="horaFinal">
		                    <label for="time_end" class="form-label w-100">Hora Final</label> 
		                    <input type="text" id="time_end" data-format="HH:mm" data-template="HH : mm" name="datetime" th:field="*{fin}">
		                </div>

		                <div class="form-group mt-2">
		                    <input class="form-check-input" type="checkbox" value="" id="hastaElOtroDiaCheckbox" th:field="*{hastaElOtroDia}">
		                    <label class="form-check-label" for="hastaElOtroDiaCheckbox"> Dura hasta el otro dia </label>
		                </div>

		            </div>
		        </section>
		        <!--===============================================================================================-->

		    	<!--===============================================================================================-->
		        <h3>Cotizacion</h3>
		        <section>
		            <h2>Presupuesto</h2>
		            <p>Puede agregar extras que cambiaran el precio final</p>
		            <div class="fieldset-content">
		                <div class="form-group">
		                    <label for="extras" class="form-label">Extras</label> 
		                    <div id="listaExtra"> </div>
			            </div>

		                <div class="form-group col-md-2" id="horaFinal">
		                    <label for="presupuesto" class="form-label">Presupuesto final</label> 
		                    <input type="number" class="form-control" id="presupuesto" th:field="*{evento.presupuesto}" readonly/>
		                </div>
		            </div>
		        </section>
		    	<!--===============================================================================================-->

		    	<!--===============================================================================================-->
		        <h3>Datos de contacto</h3>
		        <section>
		        	<div class="row">
		        		<div class="col-4">
				            <h2>Finalizar reserva</h2>
				            <p>Complete con los datos del cliente</p>
				        </div>
		        		<div id="clienteNoEncontrado" class="col-4 d-none">
							<div class="alert alert-danger" role="alert">Cliente no encontrado </div>
						</div>
					</div>

		            <div>
						<div class="row">
						    <div class="form-group col-md-4">
		                    	<label for="cuil">CUIT/CUIL</label>
								<input type="number" class="form-control" id="cuil" th:field="*{cliente.cuil}" name="cuil" required>	
							</div>
							<div class="form-group col-md-4">
								<label for="buscarClientePorCuil"> Buscar</label>
								<button id="buscarClientePorCuil" class="form-control btn btn-primary">buscar por cuil</button>
							</div>
						</div>

						<div class="row  mt-2">
	                    	<div class="col-md-4">
	                    		<label for="nombreCliente">Nombre</label>
	                    		<input type="text" class="form-control" id="nombreCliente" th:field="*{cliente.nombre}" name="nombre" required>
	                    	</div>
	                    	<div class="col-md-4">
	                    		<label for="apellido">Apellido</label>
								<input type="text" class="form-control" id="apellido" th:field="*{cliente.apellido}" name="apellido" required>
	                    	</div>
	                    </div>

						<div class="row mt-2">
							<div class="form-group col-md-4">
		                    	<label for="email">E-mail</label>
								<input type="text" class="form-control email" id="email" th:field="*{cliente.email}" name="email" required>
		                    </div>
	
							<div class="form-group col-md-4">
		                    	<label for="celular">Celular</label>
								<input type="number" class="form-control" id="celular" th:field="*{cliente.celular}" name="celular" required>
							</div>
						</div>

						<div class="row mt-2">
							<div class="form-group col-md-4">
								<label for="empresa">Nombre de la empresa (Opcional)</label>
								<input type="text" class="form-control" id="empresa" th:field="*{cliente.empresa}" name="empresa">	
							</div>
							<div class="form-group col-md-4">
					  			<label for="sexo">Sexo</label>
				                <select class="form-select" id="sexo" th:field="*{cliente.sexo}">
				                    <option th:each="sexo : ${listaSexo}" th:value="${sexo.id}" th:text="${sexo.nombre}"/>
				                </select>
							</div>
		            	</div>
		           	</div>
		        </section>
    			<div id="spinner-finish" class="overlay d-none">
			        <div class="d-flex justify-content-center">
				        <div class="spinner-border text-primary spinner-margin" style="width: 6rem; height: 6rem;" role="status"> </div>
					</div>
				</div>
		        <!--===============================================================================================-->

	        	<button type="submit" style="display:none;"></button>
	   		</div>
		</form>
	</div>


    <!-- JS -->
    <script src="../vendor/jquery/jquery-3.2.1.min.js"></script>
    <script src="../vendor/jquery-steps/jquery.steps.min.js"></script>
    <script src="../vendor/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="../vendor/jquery-validation/dist/localization/messages_es_AR.js"></script>
    <script src="../vendor/moment/moment.js"></script>
    <script src="../vendor/moment/locale-es.js"></script> 
    <script src="../vendor/combodate/combodate.js"></script>

    <script th:inline="javascript">
    	var salonId = /*[[${salon.id}]]*/ [];
    	var listaSubTipoEvento = /*[[${listaSubTipoEvento}]]*/ [];
    	var listaExtra = /*[[${listaExtra}]]*/ [];
    	var listaServicio = /*[[${listaServicio}]]*/ [];
    </script>

    <script src="../js/saveEventoWizard.js"></script>
    <script src="../js/saveEvento.js"></script>
    <script src="../js/saveEventoAjax.js"></script>

</body>

</html>